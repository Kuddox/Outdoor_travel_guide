<!-- <h1>Attractions </h1> -->

<div class="panel panel-default">
  <% if @api_results['places'] == [] %>
    <h7>Sorry, nothing found.  Please try another search.</h7>
    <%= link_to ' Home', root_path, class: "btn btn-danger" %>
  <% end %>  
  <% @api_results['places'].each do |place| %>
  <% place['activities'].each do |activity| %>
  <div class="panel-heading">
    <h5><strong class="bold-cap"><%= place['city'] %> </strong>
    <%= activity['activity_type_name'] %>
    <%= link_to 'Save To Trip', new_attraction_path(unique_id: activity['unique_id']), id: 'existing-trip-ajax', remote: true, class: "add-trip" %></h5> 
  </div>
  <div class="panel-body">
    <ol><%= link_to place['name'], attraction_api_path(activities_unique_id: activity['unique_id']), class: "atr-name" %></ol> 
    <h6>Average Rating:
      <% Review.where(unique_id: activity['unique_id']).average('rating').to_i.times do %>
        <span class="glyphicon glyphicon-star"></span>
      <% end %> 
      - <%= Review.where(unique_id: activity['unique_id']).count %> reviews</h6>
    <li><h4>Directions</h4></li>
    <%= place['directions'] %>
    <li><h4>Description</h4></li>
    <%= activity['description'].html_safe.strip %>
  </div>
  <% end %>


  <div id='modal-div'>
  </div>

  <div class="row">
    <%= link_to 'New Trip', new_trip_path(@trip), id: 'new-trip-ajax', remote: true, class: "btn myButton3" %>
    <div id="loc_map" style='height: 450px; width: 450px; text-align: center;'></div>
  </div> 

  <script>
    var myCenter=new google.maps.LatLng(0,0);

    function initialize()
    {
      var mapProp = {
        center:myCenter,
        zoom:18,
        mapTypeId:google.maps.MapTypeId.TERRAIN
      };

      var map=new google.maps.Map(document.getElementById("loc_map"),mapProp);
    }

    google.maps.event.addDomListener(window, 'load', initialize);
  </script>

  <% end %>
</div>

